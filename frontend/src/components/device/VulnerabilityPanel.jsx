import React from 'react';
import { Activity, AlertTriangle } from 'lucide-react';

const getTargetColor = (score) => {
    if (score >= 80) return 'text-emerald-400 bg-emerald-500/10 border-emerald-500/20';
    if (score >= 60) return 'text-amber-400 bg-amber-500/10 border-amber-500/20';
    return 'text-red-400 bg-red-500/10 border-red-500/20';
};

const VulnerabilityPanel = ({ telemetry }) => {
    return (
        <div className="bg-[#121a2f] border border-slate-800 flex flex-col p-6 shrink-0 h-full">
            <h3 className="text-[11px] font-bold text-slate-500 uppercase tracking-widest mb-4">Architecture Grade</h3>

            <div className="flex items-center justify-between mb-5 pb-5 border-b border-slate-800/80">
                <div className="flex items-end gap-2">
                    <span className="text-[36px] font-bold text-slate-100 leading-none">{telemetry.overallScore}</span>
                    <span className="text-[14px] text-slate-500 font-mono mb-1">/ 100</span>
                </div>
                <div className={`px-2 py-1 border font-bold text-[10px] tracking-widest uppercase flex items-center gap-1 ${getTargetColor(telemetry.overallScore)}`}>
                    <Activity size={12} /> {telemetry.systemStatus}
                </div>
            </div>

            <div className="grid grid-cols-2 gap-y-4 gap-x-3 font-mono text-[11px] mt-auto">
                <div className="flex flex-col">
                    <span className="text-slate-500 uppercase mb-1">Confidence</span>
                    <span className="text-blue-400 font-bold">{telemetry.confidence}%</span>
                </div>
                <div className="flex flex-col">
                    <span className="text-slate-500 uppercase mb-1">Trend</span>
                    <span className="text-emerald-400 font-bold flex items-center gap-1">
                        +2.4% Î”
                    </span>
                </div>
                <div className="flex flex-col col-span-2">
                    <span className="text-slate-500 uppercase mb-1">Vulnerable Vector</span>
                    <span className="text-orange-400 font-bold flex items-center gap-1">
                        <AlertTriangle size={12} /> {telemetry.vulnerableViewport}
                    </span>
                </div>
            </div>
        </div>
    );
};

export default VulnerabilityPanel;
